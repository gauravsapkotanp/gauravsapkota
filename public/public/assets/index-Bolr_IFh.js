import{r as d,j as e,R as F,q as R,d as v,y as T}from"./app-DQwZl_1E.js";import{B as I,A as M}from"./AdminLayout-Ds08iPRU.js";import{S as B,F as L,R as $,u as f,w as A,E as _}from"./index-C9IXQ078.js";import{R as O,a as q}from"./index-BEMjUPfZ.js";import{C as z}from"./ConfirmationModal-DTT2hGYw.js";import{s as N}from"./index-r7jMQqDd.js";import"./index-C6DN8HbB.js";import"./iconBase-T-a9Sf2d.js";const G=({data:m,columns:a,customRenderFunction:x,actions:b=[]})=>{const[h,g]=d.useState(""),[l,i]=d.useState(0),[s,p]=d.useState(10),[u,y]=d.useState(""),o=t=>{g(t.target.value),i(0)},w=t=>{p(parseInt(t.target.value,10)),i(0)},n=m.filter(t=>a.some(r=>t[r.key].toString().toLowerCase().includes(h.toLowerCase()))),k=Math.ceil(n.length/s),C=n.slice(l*s,(l+1)*s),S=t=>{i(t.selected)},P=()=>{const t=f.json_to_sheet(n),r=f.book_new();f.book_append_sheet(r,t,"Data"),A(r,"data.xlsx")},E=()=>{const t=new _;t.autoTable({head:a.map(r=>r.label),body:n.map((r,c)=>a.map(j=>r[j.key]))}),t.save("data.pdf")},D=(t,r)=>t.key==="photopath"&&r[t.key]?x?x(r):e.jsx("img",{className:"w-36 mx-auto rounded-xl",src:r[t.key],alt:""}):r[t.key];return d.useEffect(()=>{const t=l*s+1,r=Math.min((l+1)*s,n.length),c=n.length;y(`Showing ${t} to ${r} of ${c} entries`)},[l,s,n]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"overflow-auto border-2 rounded-xl border-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative p-2",children:[e.jsx("span",{className:"text-black px-2",children:"Show "}),e.jsx("select",{value:s,onChange:w,className:"appearance-none text-black bg-white border border-gray-300 hover:border-gray-500 rounded-md text-sm leading-tight focus:outline-none focus:ring",children:[10,20,30,40].map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("span",{className:"text-black px-2",children:"Entries "})]}),e.jsx("button",{onClick:P,className:"m-2 p-2 bg-white text-green-700 border-2 border-green-700 hover:border-green-500 hover:text-green-500 rounded-lg",children:e.jsx(B,{className:"text-xl"})}),e.jsx("button",{onClick:E,className:"m-2 p-2 bg-white text-red-700 border-2 border-red-700 hover:border-red-500 hover:text-red-500 rounded-lg",children:e.jsx(L,{className:"text-xl"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-black",children:"Search : "}),e.jsx("input",{type:"text",value:h,onChange:o,className:"mr-2 pr-2 border rounded-lg w-52 text-black"})]})]}),e.jsxs("table",{className:"w-full text-center whitespace-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"font-bold py-2 border-r border-b border-t border-gray-300 px-2 text-black",children:"S.N"}),a.map(t=>e.jsx("th",{className:"font-bold py-2 border-r border-b border-t border-gray-300 px-2 text-black",children:t.label},t.key)),e.jsx("th",{className:"font-extrabold py-2 border-b border-t border-gray-300 px-2 text-black",children:"Action"})]})}),e.jsx("tbody",{children:C.map((t,r)=>e.jsxs("tr",{className:"rounded-bl-xl",children:[e.jsx("td",{className:"py-2 border-r border-t border-b border-gray-300 px-2 text-black",children:l*s+r+1}),a.map(c=>e.jsx("td",{className:"py-2 border-r border-t border-b border-gray-300 px-2 text-black",children:D(c,t)},c.key)),e.jsx("td",{className:"py-2 border-t border-b border-gray-300 px-2 text-black",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:b.map((c,j)=>e.jsx(F.Fragment,{children:c(t)},j))})})]},t.id))})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{className:"text-center mt-2 mb-4 text-gray-600 text-sm pl-5",children:u}),e.jsx($,{previousLabel:e.jsx("span",{className:"text-gray-400 bg-gray-200 p-2 rounded-lg",children:"Previous"}),nextLabel:e.jsx("span",{className:"text-gray-400 bg-gray-200 p-2 rounded-lg",children:"Next"}),breakLabel:"...",pageCount:k,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:S,containerClassName:"pagination flex justify-center",pageClassName:"px-4 py-2 border border-gray-300 rounded-md text-black cursor-pointer hover:bg-gray-200 hover:text-black",activeClassName:"bg-blue-500 text-white",className:"flex gap-2 items-center justify-end"})]})]})})},Y=({blogs:m})=>{const{flash:a}=R().props,[x,b]=d.useState(!1),[h,g]=d.useState(null),l=[{key:"title",label:"Title"},{key:"description",label:"Description"},{key:"photopath",label:"Image"},{key:"date",label:"Date"}];d.useEffect(()=>{a.message&&I.success(a.message)},[a.message]);const i=o=>{g(o),b(!0)},s=()=>{b(!1),g(null)},p=async()=>{T.get(`/blogs/delete/${h}`),s()},u=o=>e.jsx("img",{className:"w-36 mx-auto rounded-xl",src:`/img/blogs/${o.photopath}`,alt:""}),y=[o=>e.jsx(v,{href:`${N("blogs.edit",{id:o.id})}`,title:"Edit",children:e.jsx("div",{className:"bg-[#1650d0] text-white w-9 h-8 flex items-center justify-center hover:bg-transparent border-2 hover:border-[#1650d0] hover:text-[#1650d0] duration-1000 rounded-md shadow-md shadow-blue-200",children:e.jsx(O,{})})},"edit"),o=>e.jsx("button",{title:"Delete",className:"w-9 h-8 flex items-center justify-center rounded-md text-white bg-[#b21f31] hover:bg-transparent border-2 hover:text-[#b21f31] shadow-md shadow-red-200 hover:border-[#b21f31] duration-1000",onClick:()=>i(o.id),children:e.jsx(q,{})},"delete")];return e.jsxs(M,{children:[e.jsxs("div",{className:"pt-12 lg:pt-0 px-4 pb-36 bg-gradient-to-r from-orange-400 to-orange-500",children:[e.jsx("h1",{className:"text-lg  text-white pt-12 lg:pl-4 uppercase",children:"Blogs"}),e.jsx("div",{className:"mt-6 sm:flex gap-4 justify-end",children:e.jsx("div",{className:"mt-4",children:e.jsx(v,{href:N("blogs.create"),className:"bg-gray-300 uppercase text-primary hover:bg-transparent border-2 hover:border-gray-300 hover:text-gray-200 duration-1000 text-[12px] sm:text-sm font-semibold py-2 px-4 rounded-full",children:"Add Blog"})})})]}),e.jsx("div",{className:"p-4 mx-3 lg:mx-5 overflow-x-auto overflow-y-hidden bg-white rounded-xl shadow-md -mt-28",children:e.jsx(G,{data:m,route:"blogs",columns:l,customRenderFunction:u,actions:y})}),e.jsx(z,{isOpen:x,onClose:s,onConfirm:p,message:"Are you sure to delete this blog?"})]})};export{Y as default};
